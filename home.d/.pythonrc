#!/usr/bin/env python
## ~/.pythonrc: python startup file
import atexit as _doatexit # avoid overriding atexit function in custom module
import os
import sys

def is_py3():
    return (sys.version_info.major >= 3)

py2histfile = ".python2_history"
py3histfile = ".python3_history"

try:
    import readline
except ImportError:
    print("ImportError: import readline:")
else:
    import rlcompleter
    ## tab completion
    #################
    readline.parse_and_bind('tab: complete')

## history file
###############
histfile = os.path.join(os.environ['HOME'], py3histfile if is_py3() else py2histfile)
del py2histfile, py3histfile, is_py3, sys

try:
    readline.read_history_file(histfile)
except IOError:
    print("No history file: %s"%histfile)

_doatexit.register(readline.write_history_file, histfile)
del os, histfile, readline, rlcompleter
